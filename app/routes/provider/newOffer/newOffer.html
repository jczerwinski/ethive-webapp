<h1 class="modal-header">Create a new Offer</h1>
<div class="modal-body">
<form name="createOfferForm" class="form-horizontal" role="form" ng-submit="submit(createOfferForm)" novalidate>

<div ng-if="!provider" class="form-group has-feedback" ng-class="{'has-error': createOfferForm.provider.$invalid && createOfferForm.provider.$dirty, 'has-success': createOfferForm.provider.$valid}">
  <label for="provider" class="col-sm-2 control-label">Provider ID</label>
  <div class="col-sm-10">
    <input ng-model="newOffer.provider" name="provider" type="text" class="form-control" id="provider" placeholder="provider-id" existing-provider-id required autofocus />
    <span class="glyphicon form-control-feedback" ng-class="{'glyphicon-remove': createOfferForm.provider.$invalid && createOfferForm.provider.$dirty, 'glyphicon-ok': createOfferForm.provider.$valid}"></span>
    <div class="help-block">The ID of the provider offering this service.</div>
    <div class="help-block" ng-show="createOfferForm.provider.$error.required && createOfferForm.provider.$dirty">A provider ID is required.</div>
  </div>
</div>

<div ng-if="provider" class="form-group has-feedback has-success">
  <label class="col-sm-2 control-label">Provider</label>
  <div class="col-sm-10">
    <p class="form-control-static">
      {{provider.name}}
      <span class="glyphicon form-control-feedback glyphicon-ok pull-left"></span>
    </p>
  </div>
</div>

<div class="form-group has-feedback" ng-class="{'has-error': createOfferForm.service.$invalid && createOfferForm.service.$dirty, 'has-success': createOfferForm.service.$valid}">
  <label for="service" class="col-sm-2 control-label">Service</label>
  <div class="col-sm-10">
    <div class="form-control-static">
      {{newOffer.service.name}} <serviceselectorbutton options="serviceSelectorOptions" required name="service" service="newOffer.service"></serviceselectorbutton>
      <span class="glyphicon form-control-feedback" ng-class="{'has-error': createOfferForm.service.$invalid && createOfferForm.service.$dirty, 'glyphicon-ok': createOfferForm.service.$valid}"></span>
    </div>
  </div>
</div>

<div class="form-group has-feedback" ng-class="{'has-error': createOfferForm.location.$invalid && createOfferForm.location.$dirty, 'has-success': createOfferForm.location.$valid}">
  <label for="name" class="col-sm-2 control-label">Location</label>
  <div class="col-sm-10">
    <input ng-model="newOffer.location" ng-autocomplete options="locationOptions" name="location" type="text" class="form-control" id="location" placeholder="Location" required />
    <span class="glyphicon form-control-feedback" ng-class="{'glyphicon-remove': createOfferForm.location.$invalid && createOfferForm.location.$dirty, 'glyphicon-ok': createOfferForm.location.$valid}"></span>
    <div class="help-block">The city where this service will be offered.</div>
    <div class="help-block" ng-show="createOfferForm.location.$error.required && createOfferForm.location.$dirty">A location is required.</div>
  </div>
</div>

<div class="form-group has-feedback" ng-class="{'has-error': createOfferForm.amount.$invalid && createOfferForm.amount.$dirty || createOfferForm.currency.$invalid && createOfferForm.currency.$dirty, 'has-success': createOfferForm.amount.$valid && createOfferForm.currency.$valid}">
  <label for="price" class="col-sm-2 control-label">Price</label>
  <div class="col-sm-10">
    <input ng-model="newOffer.price.amount" min="0" type="number" name="amount" class="form-control form-control-inline" id="amount" placeholder="Amount" required style="width: 10px" />
    <input type="text" ng-model="newOffer.price.currency" typeahead="currency.code as currency.code + ' - ' + currency.name for currency in currencies | filter: $viewValue | limitTo:7" typeahead-editable="false" name="currency" class="form-control form-control-inline" id="currency" placeholder="Currency" required />
    <span class="glyphicon form-control-feedback" ng-class="{'glyphicon-remove': (createOfferForm.currency.$invalid && createOfferForm.currency.$dirty) || (createOfferForm.amount.$invalid && createOfferForm.amount.$dirty), 'glyphicon-ok': createOfferForm.currency.$valid && createOfferForm.amount.$valid}"></span>
    <div class="help-block">The price at which you are offering this service.</div>
    <div class="help-block" ng-show="(createOfferForm.amount.$error.required || createOfferForm.price.$error.required) && (createOfferForm.amount.$dirty || createOfferForm.price.$dirty)">Both an amount and a currency are required.</div>
    <div class="help-block" ng-show="createOfferForm.amount.$invalid && createOfferForm.amount.$dirty">The amount must be a number zero or greater.</div>
    <div class="help-block" ng-show="createOfferForm.currency.$invalid && createOfferForm.currency.$dirty">You must use a currency from the list provided.</div>
  </div>
</div>

<div class="form-group has-feedback" ng-class="{'has-error': createOfferForm.landing.$invalid && createOfferForm.landing.$dirty, 'has-success': createOfferForm.landing.$valid}">
  <label for="price" class="col-sm-2 control-label">Landing Page</label>
  <div class="col-sm-10">
    <input ng-model="newOffer.landing" type="url" name="landing" class="form-control" id="landing" placeholder="http://www.example.com/offer-page" required />
    <span class="glyphicon form-control-feedback" ng-class="{'glyphicon-remove': createOfferForm.landing.$invalid && createOfferForm.landing.$dirty, 'glyphicon-ok': createOfferForm.landing.$valid}"></span>
    <div class="help-block" ng-show="createOfferForm.landing.$error.required && createOfferForm.landing.$dirty">A landing page is required. <span class="glyphicon glyphicon-remove"></span></div>
    <div class="help-block" ng-show="createOfferForm.landing.$invalid && createOfferForm.landing.$dirty">Your landing page must be a valid web page address (URL). <span class="glyphicon glyphicon-remove"></span></div>
    <div class="help-block no-validation">The web page that you would like users who click on this offer to be redirected to.</div>
    <div class="help-block no-validation">Make sure you get this right. If you are paying us for clicks to this page, you may be charged even if you provide an incorrect URL.</div>
  </div>
</div>

<div class="form-group">
  <div class="col-sm-offset-2 col-sm-10">
    <button type="submit" id="submit" class="btn btn-success" ng-disabled="createOfferForm.$invalid">Create New Offer</button>
    <button type="button" id="cancel" ng-click="cancel()" class="btn btn-cancel">Cancel</button>
  </div>
</div>

</form>
</div>